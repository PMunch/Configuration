
<!-- saved from url=(0076)file:///home/peter/Projects/Tiny%20Agile/Test/conflicttest/singlefile.html#0 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Tiny Agile</title>
<style>body { color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Roboto, Arial, sans-serif; text-rendering: optimizeLegibility; width: 100%; max-width: 87.5em; margin: 0px auto; box-sizing: border-box; }.row { width: 100%; float: left; }.columns { float: left; display: block; box-sizing: border-box; }.large-2, .large-7, .large-5 { padding-left: 0.9375em; padding-right: 0.9375em; }.large-2 { width: 16.66667%; }.large-3 { width: 25%; }.large-4 { width: 33.33333%; }.large-5 { width: 41.66667%; }.large-7 { width: 58.33333%; }.large-8 { width: 66.66667%; }.large-9 { width: 75%; }.large-10 { width: 83.33333%; padding: 1.25rem; }hr { border-style: solid; border-color: rgb(221, 221, 221); border-width: 1px 0px 0px; margin: 1.25rem 0px 1.1875rem; }h2, h3, h5 { font-style: normal; font-weight: normal; margin-bottom: 0.5rem; margin-top: 0.2rem; line-height: 1.4; }.panel h3 { line-height: 1; margin-bottom: 0.625rem; }h2 { font-size: 2.3125rem; }h3 { font-size: 1.6875rem; margin-top: 0.5rem; }h5 { font-size: 1.125rem; }button { border: 0px solid; cursor: pointer; margin: 0px 0px 1.25rem; padding: 0.3rem 0.625rem 0.3rem 0.6875rem; color: rgb(255, 255, 255); font-size: 11px; background-color: rgb(43, 166, 203); }.alert { background-color: rgb(198, 15, 19); }.side-nav { font-size: 14px; list-style-type: none; display: block; padding-left: 0.875rem; }.side-nav li { line-height: 3; }.side-nav li a { text-decoration: none; color: rgb(43, 166, 203); }.panel { border: 1px solid rgb(216, 216, 216); background-color: rgb(242, 242, 242); }.radius { border-radius: 5px; }#section { margin-top: 10px; }table { font-size: 14px; border: 0px; border-collapse: collapse; margin-bottom: 1.25rem; }table.edit td { padding-top: 0.25rem; padding-bottom: 0.25rem; }table.edit input { top: 0px; }#categorytable { width: 100%; }#categorytable tr { border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(216, 216, 216); background-color: rgb(242, 242, 242); }th, td { padding: 0.5625rem 0.625rem; text-align: left; line-height: 1.125rem; box-sizing: border-box; }#categorytable th:last-child { float: right; }#categorytable td:last-child { text-align: right; }#categorytable td:first-child { width: 15%; font-size: 30px; }#categoryTable th:first-child { width:15%; }#categoryTable th:nth-child(2) { width:55%; }#taskdetailtable tr td:first-child, #selectortable tr td:first-child { color: rgb(127, 127, 127); padding-right: 5px; }p { margin-top: 0px; margin-bottom: 1.35rem; padding-top: 0.875rem; line-height: 1.6; position: relative; top: 3px; }input { width: 100%; border: 1px solid rgb(204, 204, 204); color: rgba(0, 0, 0, 0.74902); position: relative; left: -9px; top: -1px; font-size: 1.6875rem; padding: 0.5rem; margin-bottom: 0.5rem; text-rendering: inherit; height: 45px; background-color: rgb(250, 250, 250); }select { width: 100%; border: 1px solid rgb(204, 204, 204); color: rgba(0, 0, 0, 0.74902); position: relative; left: -9px; text-rendering: inherit; background-color: rgb(250, 250, 250); }select:hover { border-color: rgb(153, 153, 153); background-color: rgb(243, 243, 243); }.small { padding: 0.25rem 0.25rem 0.25rem 0.5rem; font-size: 0.875rem; height: 28px; margin: 0px; }select.small { padding-left: 4px; }textarea { border: 1px solid rgb(204, 204, 204); padding: 0.5rem; width: 100%; font-family: 'Helvetica Neue', Helvetica, Roboto, Arial, sans-serif; color: rgba(0, 0, 0, 0.74902); font-size: 1rem; position: relative; left: -0.5rem; text-rendering: inherit; min-height: 2.6rem; line-height: 1.6; margin-bottom: 0.75rem; }#section { display: table; }#categoryview, #taskview { display: table-cell; vertical-align: top; position: relative; float: none !important; }.center { margin: auto; position: absolute; top: 0px; bottom: 0px; }#modifytaskbutton { float: right; }#modifycategorybutton { float: right; }input.active, select.active{ background-color: #9AD7EA; }</style></head>
<body>
<div class="row">
<aside class="large-2 columns">
<h2>Tiny Agile</h2>
<hr>
<nav id="navigation"><h5>Categories<button id="addCategoryButton" class="tiny button radius" style="float:right;" href="#">Add category</button></h5><ul class="side-nav"></ul></nav>
</aside>
<div id="section" class="panel radius large-10 columns">
	<div id="categoryView" class="large-7 columns" style="border-right:1px solid #D8D8D8">
		<div style="height:340px;">&nbsp;<span class="center" style="height:27px;"><h3 style="color:#7f7f7f">&#10096; Select a category</h3></span></div>
	</div>
	<div id="taskView" class="large-5 columns">
		<div style="height:340px;">&nbsp;<span class="center" style="margin-left:30px;height:27px;"><h3 style="color:#7f7f7f">&#10096; Select a task</h3></span></div>
	</div>
</div>
</div><div id="dataBlock">
</div><div id="staticDataBlock">
<div id="statusList" data="Not done,In progress,Blocked,Done"></div>
</div><script>
function byId(n){return document.getElementById(n)}function uniqueArrays(){for(var t=Array.prototype.concat.apply([],Array.prototype.slice.call(arguments)),i=[],n=0;n<t.length;n++)t.lastIndexOf(t[n])==n&&t[n]!=null&&i.push(t[n]);return i}function escapeHTML(n){return n.replace(/[&<>'"]/g,function(n){return MAP[n]})}function showDefault(){byId("section").innerHTML='<div id="categoryView" class="large-7 columns" style="border-right:1px solid #D8D8D8">\t\t\t<div style="height:340px;">&nbsp;<span class="center" style="height:27px;"><h3 style="color:#7f7f7f">&#10096; Select a category</h3></span></div>\t\t</div>\t\t<div id="taskView" class="large-5 columns">\t\t\t<div style="height:340px;">&nbsp;<span class="center" style="margin-left:30px;height:27px;"><h3 style="color:#7f7f7f">&#10096; Select a task</h3></span></div>\t\t</div>',populateNavigation();var n=byId(window.location.hash.slice(1));n!=null&&(n.getAttribute("class")=="task"?(showCategory(n.getAttribute("category")),showTask(n.getAttribute("id"))):showCategory(n.getAttribute("id")))}function resolveConflicts(){var g=byId("dataBlock").outerHTML,a,l,w,p,e,i,n,h;if(byId("dataBlock").outerHTML="",document.body.innerHTML.indexOf("&gt;&gt;&gt;&gt;&gt;&gt;&gt;")!=-1)if(document.body.innerHTML.indexOf("&gt;&gt;&gt;&gt;&gt;&gt;&gt;")<document.body.innerHTML.indexOf("<script>")||document.body.innerHTML.indexOf("&gt;&gt;&gt;&gt;&gt;&gt;&gt;")>document.body.innerHTML.indexOf("<\/script>")){for(a="",l=document.styleSheets[0].cssRules,i=0;i<l.length;i++)a+=l[i].cssText;w=document.scripts[0].outerHTML,p="<html>\n<head>\n<title>Tiny Agile</title>\n<style>"+a+'</style></head>\n<body>\n<div class="row">\n<aside class="large-2 columns">\n<h2>Tiny Agile</h2>\n<hr>\n<nav id="navigation">\n</nav>\n</aside>\n<div id="section" class="panel radius large-10 columns">\n<div id="categoryView" class="large-7 columns" style="border-right:1px solid #D8D8D8">\n<div style="height:340px;">&nbsp;<span class="center" style="height:27px;"><h3 style="color:#7f7f7f">&#10096; Select a category</h3></span></div>\n</div>\n<div id="taskView" class="large-5 columns">\n<div style="height:340px;">&nbsp;<span class="center" style="margin-left:30px;height:27px;"><h3 style="color:#7f7f7f">&#10096; Select a task</h3></span></div>\n</div>\n</div>\n</div>'+g+'<div id="staticDataBlock">\n<div id="statusList" data="Not done,In progress,Blocked,Done"></div>\n</div>'+w+"</body>\n</html>",document.write(p)}else document.body.innerHTML+=g;for(var v="",d="",t=byId("dataBlock").innerHTML;t.indexOf("&gt;&gt;&gt;&gt;&gt;&gt;&gt;")!=-1;){var s=t.lastIndexOf("&gt;&gt;&gt;&gt;&gt;&gt;&gt;"),nt=s+t.substring(s).indexOf("\n")+1,o=t.lastIndexOf("======="),tt=o+t.substring(o,s).indexOf("\n")+1,c=t.lastIndexOf("&lt;&lt;&lt;&lt;&lt;&lt;&lt;"),it=c+t.substring(c,o).indexOf("\n")+1;v+=t.substring(it,o),d+=t.substring(tt,s),t=t.substring(0,c)+t.substring(nt)}var y=new DOMParser,f=y.parseFromString(v,"text/html"),u=y.parseFromString(d,"text/html");byId("dataBlock").innerHTML=t;var r=uniqueArrays(f.getElementById("deleted")?f.getElementById("deleted").getAttribute("entries").split(","):null,u.getElementById("deleted")?u.getElementById("deleted").getAttribute("entries").split(","):null,byId("deleted")?byId("deleted").getAttribute("entries").split(","):null),b=[],k=[];for(i=0;i<f.body.children.length;i++)if((n=f.body.children[i],n.getAttribute("id")!="deleted")&&r.indexOf(n.getAttribute("id"))==-1&&r.indexOf(n.getAttribute("iteration"))==-1&&r.indexOf(n.getAttribute("category"))==-1){if(e=u.getElementById(n.getAttribute("id")),e&&e.getAttribute("iteration")!=n.getAttribute("iteration")){n.getAttribute("class")=="task"&&k.push([n,e]),n.getAttribute("class")=="category"&&b.push([n,e]);continue}byId("dataBlock").appendChild(n),byId("dataBlock").appendChild(document.createTextNode("\n"))}for(i=0;i<u.body.children.length;i++)(n=u.body.children[i],n.getAttribute("id")!="deleted")&&r.indexOf(n.getAttribute("id"))==-1&&r.indexOf(n.getAttribute("iteration"))==-1&&r.indexOf(n.getAttribute("category"))==-1&&(f.getElementById(n.getAttribute("id"))||(byId("dataBlock").appendChild(n),byId("dataBlock").appendChild(document.createTextNode("\n"))));return byId("deleted")?byId("deleted").setAttribute("entries",r.join(",")):(h=document.createElement("div"),h.setAttribute("id","deleted"),h.setAttribute("entries",r.join(",")),byId("dataBlock").appendChild(h),byId("dataBlock").appendChild(document.createTextNode("\n"))),b.concat(k)}function resolveManualConflicts(n){var t,i,u,r,f;if(n.length==0){showDefault();return}byId("section").innerHTML="<h2>You have {0} conflicting element{1} which must be manually fixed</h2>If you save before {2} {3} handled {2} will be deleted!</div><br/><br/>".format(n.length,n.length==1?"":"s",n.length==1?"it":"they",n.length==1?"is":"are"),t=n.shift(),t[0].getAttribute("class")=="task"?(i=new Task(t[0]),u=new Task(t[1]),byId("section").innerHTML+="<div class='large-5 columns'><h2>First task</h2>{0}</div><div class='large-2 columns'></div><div class='large-5 columns'><h2>Other task{2}</h2>{1}</div>".format(i.createEditViewForElement(),u.createParameterViewForElement(),""),byId("saveTaskButton").onclick=function(){i.setValuesFromEditView(),i.update(),resolveManualConflicts(n)},byId("deleteTaskButton").remove(),byId("modifyTaskButton").remove(),textAreaAdjust(byId("taskCreateDescription"))):(r=new Category(t[0]),f=new Category(t[1]),byId("section").innerHTML+="<div class='large-5 columns'><h2>First category</h2>{0}</div><div class='large-2 columns'></div><div class='large-5 columns'><h2>Other categor{2}</h2>{1}</div>".format(r.createEditViewForElement(),f.createParameterViewForElement(),"y"),byId("saveCategoryButton").onclick=function(){r.setValuesFromEditView(),r.update(),resolveManualConflicts(n)},byId("deleteTaskButton").remove(),byId("modifyTaskButton").remove(),textAreaAdjust(byId("categoryCreateDescription")))}function deleteTask(n){closeTask(),n.remove(),showCategory(n.category)}function deleteCategory(n){n.remove(),populateNavigation(),closeCategory()}function saveTask(n){if(byId("taskCreateTitle").value==""){alert("A task needs a title!");return}n.setValuesFromEditView(),byId(n.id)&&(markAsRemoved(n.iteration),n.iteration=getUniqueId()),n.update(),showCategory(n.category),showTask(n.id)}function saveCategory(n){if(byId("categoryCreateTitle").value==""){alert("A category needs a title!");return}n.setValuesFromEditView(),byId(n.id)&&(markAsRemoved(n.iteration),n.iteration=getUniqueId()),n.update(),showCategory(n.id),populateNavigation()}function markAsRemoved(){var n=byId("deleted").getAttribute("entries"),t=Array.prototype.slice.call(arguments);n!=""&&t.push(n),byId("deleted").setAttribute("entries",t.join(","))}function showCategory(n){var t=new Category(byId(""+n));byId("categoryView").innerHTML=t.createViewForElement(),byId("addTaskButton").onclick=function(){var n=new Task;n.category=t.id,showTaskEdit(n)},closeTask(),window.location.hash=n,enforceSelectors()}function showCategoryEdit(n){var t=new Category(byId(n));byId("categoryView").innerHTML=t.createEditViewForElement(),textAreaAdjust(byId("categoryCreateDescription")),byId("saveCategoryButton").onclick=function(){byId("modifyTaskButton")&&byId("modifyTaskButton").setAttribute("style","visibility:visible;"),saveCategory(t)},n!="0"&&(byId("deleteCategoryButton").onclick=function(){byId("modifyTaskButton")&&byId("modifyTaskButton").setAttribute("style","visibility:visible;"),deleteCategory(t)}),byId("modifyTaskButton")&&byId("modifyTaskButton").setAttribute("style","visibility:hidden;")}function showTaskEdit(n){var t;t=typeof n=="string"?new Task(byId(n)):n,byId("taskView").innerHTML=t.createEditViewForElement(),textAreaAdjust(byId("taskCreateDescription")),byId("saveTaskButton").onclick=function(){t.category!="0"&&byId("modifyCategoryButton").setAttribute("style","visibility:visible;"),saveTask(t)},byId("deleteTaskButton").onclick=function(){t.category!="0"&&byId("modifyCategoryButton").setAttribute("style","visibility:visible;"),deleteTask(t)},t.category!="0"&&byId("modifyCategoryButton").setAttribute("style","visibility:hidden;")}function showTask(n){var t=new Task(byId(n));byId("taskView").innerHTML=t.createParameterViewForElement(),window.location.hash=n}function populateNavigation(){var o="-1",s="",h="",u,f,i,t,r,e,c,n;for(byId("selectorStatus")&&(o=byId("selectorStatus").value,s=byId("selectorAssignee").value,h=byId("selectorPoints").value),u=byClass("category"),f=byId("navigation"),f.innerHTML="<h5>Categories<button id='addCategoryButton' class='tiny button radius' style='float:right;' href='#'>Add category</button></h5>",i=document.createElement("ul"),i.setAttribute("class","side-nav"),i.setAttribute("style","padding-bottom:4rem"),n=0;n<u.length;n++)u[n].getAttribute("id")!="0"&&(t=document.createElement("a"),t.setAttribute("onclick","showCategory({0})".format(u[n].getAttribute("id"))),t.appendChild(document.createTextNode(u[n].getAttribute("title"))),r=document.createElement("li"),r.appendChild(t),i.appendChild(r));for(t=document.createElement("a"),t.setAttribute("onclick","showCategory(0)"),t.appendChild(document.createTextNode(byId("0").getAttribute("title"))),r=document.createElement("li"),r.appendChild(t),i.appendChild(r),f.appendChild(i),e='<h5>Selectors</h5>\t\t<table id="selectorTable">\t\t<tr><td>Status</td><td><select id="selectorStatus" oninput="evaluateSelector(this)" class="small"><option value="-1">All</option>',c=byId("statusList").getAttribute("data").split(","),n=0;n<c.length;n++)e+="<option value='"+n+"'>"+c[n]+"</option>";e+='</select></td></tr>\t\t<tr><td>Assignee</td><td><input id="selectorAssignee" oninput="evaluateSelector(this)" class="small" type="text" placeholder="Assignee"/></td></tr>\t\t<tr><td>Points</td><td><input id="selectorPoints" oninput="evaluateSelector(this)" class="small" type="number" placeholder="Points" /></td></tr>\t\t</table>',f.innerHTML+=e,byId("addCategoryButton").onclick=function(){var n=new Category;byId("categoryView").innerHTML=n.createEditViewForElement(),byId("saveCategoryButton").onclick=function(){saveCategory(n)}},o!="-1"&&(byId("selectorStatus").value=o,byId("selectorStatus").setAttribute("class","small active")),s!=""&&(byId("selectorAssignee").value=s,byId("selectorAssignee").setAttribute("class","small active")),h!=""&&(byId("selectorPoints").value=h,byId("selectorPoints").setAttribute("class","small active"))}function evaluateSelector(n){enforceSelectors();var t="small";n.tagName=="INPUT"&&n.value!=""&&(t="small active"),n.tagName=="SELECT"&&n.value!="-1"&&(t="small active"),n.setAttribute("class",t)}function enforceSelectors(){var f=byId("selectorStatus").value,e=byId("selectorAssignee").value,i=byId("selectorPoints").value,t,u,n,r;for(i<1&&(byId("selectorPoints").value="",i=""),t=byClass("taskListView"),u=0,n=0;n<t.length;n++)r=new Task(byId(t[n].id.slice(4))),r.points!=i&&i!=""||r.assignees.toLowerCase().indexOf(e.toLowerCase())==-1&&e!=""||r.status!=f&&f!="-1"?byId(t[n].id).setAttribute("style","display:none;"):(byId(t[n].id).setAttribute("style",""),u++);byId("noTaskMessage")&&(u==0?byId("noTaskMessage").setAttribute("style","color:rgb(127, 127, 127);text-align:center;"):byId("noTaskMessage").setAttribute("style","color:rgb(127, 127, 127);text-align:center;display:none;"))}function initializeDataBlock(){var t,n;if(byId("deleted")==null&&(t=document.createElement("div"),t.setAttribute("id","deleted"),t.setAttribute("entries",""),byId("dataBlock").appendChild(t),byId("dataBlock").appendChild(document.createTextNode("\n"))),byId("0")==null){for(n=new Category,n.id="0";n.iteration==n.id;)n.iteration=getUniqueId();n.title="Uncategorized",n.description="Tasks without a category shows up here",n.update()}}function getUniqueId(){var t=Math.round(Math.random()*1e8),e=byId("deleted").getAttribute("entries").split(","),i,u,r,n,f;if(byId(t)||e.indexOf(""+t)!=-1)return getUniqueId();for(i=byClass("task"),n=0,u=i[n];n<i.length;n++,u=i[n])if(u.getAttribute("iteration")==t)return getUniqueId();for(r=byClass("category"),n=0,f=r[n];n<r.length;n++,f=r[n])if(f.getAttribute("iteration")==t)return getUniqueId();return t}function closeDialog(){byId("dialog").innerHTML=""}function closeCategory(){byId("categoryView").innerHTML='<div style="height:340px;">&nbsp;<span class="center" style="height:27px;"><h3 style="color:#7f7f7f">&#10096; Select a category</h3></span></div>'}function closeTask(){byId("taskView").innerHTML='<div style="height:340px;">&nbsp;<span class="center" style="margin-left:30px;height:27px;"><h3 style="color:#7f7f7f">&#10096; Select a task</h3></span></div>'}function textAreaAdjust(n){n.style.height="1px",n.style.height=n.scrollHeight+"px"}function BaseElement(n){if(this.internal={},n){this.internal.DOMElement=n;for(var t=0,i=this.internal.DOMElement.attributes;t<i.length;t++)this[i[t].nodeName]=i[t].nodeValue}else for(this.internal.DOMElement=document.createElement("div"),this.id=getUniqueId(),this.iteration=getUniqueId();this.id==this.iteration;)this.iteration=getUniqueId()}function Category(n){this.parent.constructor.call(this,n),n||(this.class="category",this.title="",this.description="")}function Task(n){this.parent.constructor.call(this,n),n||(this.class="task",this.title="",this.description="",this.category="0",this.assignees="",this.status=0,this.points="")}var byClass,MAP;Function.prototype.inheritsFrom=function(n){return n.constructor==Function?(this.prototype=Object.create(n.prototype),this.prototype.constructor=this,this.prototype.parent=n.prototype):(this.prototype=n,this.prototype.constructor=this,this.prototype.parent=n),this},String.prototype.format=function(){var n=arguments;return this.replace(/{(\d+)}/g,function(t,i){return typeof n[i]!="undefined"?n[i]:t})},byClass=function(n){return document.getElementsByClassName(n)},MAP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},window.onload=function(){console.log("We're {0}!".format("rolling!")),initializeDataBlock();var n=resolveConflicts();n.length==0?showDefault():resolveManualConflicts(n)},BaseElement.prototype.remove=function(){byId(this.id)&&(markAsRemoved(this.id,this.iteration),this.internal.DOMElement.nextSibling.remove(),this.internal.DOMElement.remove())},BaseElement.prototype.update=function(){byId(this.id)||(byId("dataBlock").appendChild(this.internal.DOMElement),byId("dataBlock").appendChild(document.createTextNode("\n")));for(var n in this)n!=="internal"&&(this.__proto__[n]?!1:!0)&&this.internal.DOMElement.setAttribute(n,this[n])},Category.inheritsFrom(BaseElement),Category.prototype.createViewForElement=function(){var t=byClass("task"),n="<h3>{0}{2}</h3>\n<p id='categoryParagraph'>{1}</p>\n".format(byId(this.id).getAttribute("title"),byId(this.id).getAttribute("description"),this.id!="0"?"<button id='modifyCategoryButton' class='tiny button radius' onclick='showCategoryEdit(\""+this.id+"\")'>Modify</button>":""),t=byClass("task");for(i=0;i<t.length;i++)if(t[i].getAttribute("category")==this.id){n+=this.createTaskTable(!1);break}return n+='<button id="addTaskButton" class="tiny button radius" style="float:right;">Add Task</button>'},Category.prototype.createEditViewForElement=function(){var n='<div class="row">\t\t\t<div class="large-9 columns">\t\t\t\t<input id="categoryCreateTitle" type="text" value="{0}" placeholder="Category title" tabindex="1"></input>\t\t\t</div>\t\t\t<div class="large-3 columns">\t\t\t\t<button class=\'tiny button radius\' style=\'float:right;position:relative;top:0.5rem;\' id="saveCategoryButton" tabindex="3">Save</button>{3}\t\t\t</div>\t\t\t</div>\t\t\t<span style="position:relative;left:-1px;"><textarea id="categoryCreateDescription" oninput="textAreaAdjust(this);" placeholder="Category description" tabindex="2">{1}</textarea></span>'.format(this.title,this.description,this.id,byId(this.id)&&this.id!="0"?'<button type="button" id="deleteCategoryButton" class=\'tiny alert button radius\' style=\'float:right;position:relative;top:0.5rem;margin-right:0.5rem;\' tabindex="4">Delete</button>':""),t=byClass("task");for(i=0;i<t.length;i++)if(t[i].getAttribute("category")==this.id){n+=this.createTaskTable(!0);break}return n},Category.prototype.createParameterViewForElement=function(){return"<h4>Category title:</h4>\t\t\t{0}\t\t\t<br>\t\t\t<h4>Category description:</h4>\t\t\t{1}".format(this.title,this.description)},Category.prototype.setValuesFromEditView=function(){this.title=escapeHTML(byId("categoryCreateTitle").value),this.description=escapeHTML(byId("categoryCreateDescription").value)},Category.prototype.remove=function(){if(this.id!="0"){var n=byClass("task");for(i=0;i<n.length;i++)n[i].getAttribute("category")==this.id&&new Task(n[i]).remove();this.parent.remove.call(this)}},Category.prototype.createTaskTable=function(n){for(var r='<table id="categoryTable">\t\t\t<thead>\t\t\t<tr>\t\t\t<th>Status</th>\t\t\t<th>Title</th>\t\t\t<th>Assignee</th>\t\t\t</tr>\t\t\t</thead>'.format(this.title,this.description,this.id,byId(this.id)&&this.id!="0"?"<button type=\"button\" id=\"deleteButton\" class='tiny button radius' style='float:right;position:relative;top:0.5rem;margin-right:0.5rem;'>Delete</button>":""),t,u="even",e=byId("statusList").getAttribute("data").split(","),o=["","&#9998;","&#10006;","&#10004;"],f=0,i=byClass("task");f<4;){for(t=0;t<i.length;t++)i[t].getAttribute("category")==this.id&&i[t].getAttribute("status")==f&&(r+='<tr class="taskListView {0}" id="task{1}"{7}>\t\t\t\t<td title="{2}" style="{3}">{4}</td>\t\t\t\t<td style="{3}">{5}</td>\t\t\t\t<td style="{3}">{6}</td>\t\t\t\t</tr>'.format(u,i[t].getAttribute("id"),e[i[t].getAttribute("status")],i[t].getAttribute("status")=="3"?"color:rgba(34,34,34,.5)":"",o[i[t].getAttribute("status")],i[t].getAttribute("title"),i[t].getAttribute("assignees"),n==!1?"onclick=\"showTask('{0}');\"".format(i[t].getAttribute("id")):""),u=u=="even"?"odd":"even");f++}return r+="<tr><td id='noTaskMessage' colspan='3' style='color:rgb(127, 127, 127);text-align:center;display:none;'>No tasks found</td></tr></table>"},Task.inheritsFrom(BaseElement),Task.prototype.createEditViewForElement=function(){var t='<div class="row">\t\t\t<div class="large-8 columns">\t\t\t\t<input id="taskCreateTitle" type="text" value="{0}" placeholder="Task title" tabindex="1"></input>\t\t\t</div>\t\t\t<div class="large-4 columns">\t\t\t\t<button id="saveTaskButton" class="tiny button radius" style="float:right;position:relative;top:0.5rem;" tabindex="7">Save</button><button type="button" id="deleteTaskButton" class=\'tiny alert button radius\' style=\'float:right;position:relative;top:0.5rem;margin-right:0.5rem;\' tabindex="8">Delete</button>\t\t\t</div>\t\t</div>\t\t<span style="position:relative;left:-1px;"><textarea id="taskCreateDescription" oninput="textAreaAdjust(this);" placeholder="Task description" tabindex="2">{1}</textarea></span>\t\t<table id="taskDetailTable" class="edit">\t\t<tr><td>Category</td><td><select id="taskCreateCategory" class="small" tabindex="3">\n',r,i,u,n;for(t+=this.category=="0"?"<option value='0' selected='selected'>Uncategorized</option>":"<option value='0'>Uncategorized</option>",n=0,r=byClass("category");n<r.length;n++)i=r[n],i.getAttribute("id")!="0"&&(t+="<option value='"+i.getAttribute("id")+"' "+(i.getAttribute("id")==this.category?"selected='selected'":"")+">"+i.getAttribute("title")+"</option>");for(t+='</select></td></tr>\t\t<tr><td>Status</td><td><select id="taskCreateStatus" class="small" tabindex="4">\n',u=byId("statusList").getAttribute("data").split(","),n=0;n<u.length;n++)t+="<option value='"+n+"' "+(this.status==n?"selected='selected'":"")+">"+u[n]+"</option>";return t+='</select></td></tr>\t\t<tr><td>Assignee</td><td><input id="taskCreateAssignees" class="small" type="text" value="{2}" tabindex="5"></input></td></tr>\t\t<tr><td>Points</td><td><input id="taskCreatePoints" class="small" type="number" value="{3}" tabindex="6"></input></td></tr>\t\t</table>',t.format(this.title,this.description,this.assignees,this.points)},Task.prototype.createParameterViewForElement=function(){var n="<h3>{0}<button id='modifyTaskButton' class='tiny button radius' onclick='showTaskEdit(\""+this.id+'");\'>Modify</button></h3>\t\t<p>{1}</p>\t\t<table id="taskDetailTable">\t\t<tr><td>Category</td><td>{2}</td></tr>\t\t<tr><td>Status</td><td>{3}</td></tr>\t\t<tr><td>Assignee</td><td>{4}</td></tr>\t\t<tr><td>Points</td><td>{5}</td></tr>\t\t</table>',t=byId("statusList").getAttribute("data").split(",");return n.format(this.title,this.description,byId(this.category).getAttribute("title"),t[this.status],this.assignees,this.points)},Task.prototype.setValuesFromEditView=function(){this.title=escapeHTML(byId("taskCreateTitle").value),this.description=escapeHTML(byId("taskCreateDescription").value),this.category=escapeHTML(byId("taskCreateCategory").value),this.status=escapeHTML(byId("taskCreateStatus").value),this.assignees=escapeHTML(byId("taskCreateAssignees").value),this.points=escapeHTML(byId("taskCreatePoints").value)};
</script>
</body></html>